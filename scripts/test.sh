#!/usr/bin/env bash

# Exit script as soon as a command fails.
set -o errexit

# Executes cleanup function at script exit.
trap cleanup EXIT

cleanup() {
  # Kill the testrpc instance that we started (if we started one and if it's still running).
  if [ -n "$testrpc_pid" ] && ps -p $testrpc_pid > /dev/null; then
    kill -9 $testrpc_pid
  fi
}

if [ "$SOLIDITY_COVERAGE" = true ]; then
  testrpc_port=8555
else
  testrpc_port=8545
fi

testrpc_running() {
  nc -z localhost "$testrpc_port"
}

start_testrpc() {
  # We define 10 accounts with balance 1M ether, needed for high-value tests.
  
  local accounts=(
    --account="0x6cea04364332bf02ee0d9554c6502b7b09470b94661560939efd9cca0d036d8a,1000000000000000000000000"
    --account="0x22de1d112a1dc0d90b337614272ff17e7e642f8762942b3616ea5a67ca543e94,1000000000000000000000000"
    --account="0x22de1d112a1dc0d90b337614272ff17e7e642f8762942b3616ea5a67ca543e95,1000000000000000000000000"
    --account="0x22de1d112a1dc0d90b337614272ff17e7e642f8762942b3616ea5a67ca543e96,1000000000000000000000000"
    --account="0x364946e76ea673bfa088d8ae8aecaf67c01985966bb48eb2de6e8b5ae9f85391,1000000000000000000000000"
    --account="0x91e16d2e6a2451b57781383ad6ed30fec3640c8fc62f165170a0217718e0f337,1000000000000000000000000"
    --account="0x7e394e702bb1ac8708df983882589435e08c95c4192063db622d3b8a9542f36a,1000000000000000000000000"
    --account="0xcea0796b0b8def59fdeb0990eabe44173290b5b14faa351f087e2f318508af0d,1000000000000000000000000"
    --account="0xd08efe60fc38f011a2543f6672269d557636b9e9c8460deb46a0af74e8071cc7,1000000000000000000000000"
    --account="0x3e839f57e7912564126c19d7bb93db2c1694c0812a3ed659ed54680549d370e8,1000000000000000000000000"
    --account="0x111c57c2ca84e620e60aee82b0bddf5c837d4d5198418d200a406fa62b6bb1e4,1000000000000000000000000"
    --account="0x3a2155348fcf8ff03be6a29b4fb28042fa3590b6f419429d7424aceb32faa7ea,1000000000000000000000000"
    --account="0x426ccdeda2b83abcb8bd22787c4bbb0c14951683a8327c1b60cf0482e4beb0e5,1000000000000000000000000"
    --account="0xe61a3ab355aad907f61cab6edd8e251e61fb22559ed0c97f002305866c32e926,1000000000000000000000000"
    --account="0x7cad88b806a8b6bae8f9364ffffba6c52bd20dbb5c5e213f1a255cd7454356fe,1000000000000000000000000"
    --account="0x1eaa274cd455c0e5c0189eb5b94f68bd0f0ed9d67141d8f5458700502eddc415,1000000000000000000000000"
    --account="0x3f2a23ee8329be16b01681801b9a064825b2524d421b55412d96f0ed8748a88d,1000000000000000000000000"
    --account="0xf99248f176822f2f05d1d6722df23c3def1d74c2071f5a94ac9a4316faf93138,1000000000000000000000000"
    --account="0x6f6443d29601deb7058120b8ee5ef713dd99a96ed8ac06e46adb425ae5e8b844,1000000000000000000000000"
    --account="0x38ded50d2e043b0264f603fbb048ef0d7c359b0f00865fb6dcaa4e479466b74c,1000000000000000000000000"
    --account="0x3dbe740427717718a8de2058e4cee5ef65035d76d3b98556e32b1c21de5918b9,1000000000000000000000000"
    --account="0xe5d1abc6f2677e9a9a2ddeeeb3a0a2c0ab2f025c6eec0162161aa5cb691ccf34,1000000000000000000000000"
    --account="0xe0eed83fe7ba6240cfb861fb9d8e8e409866e11218c2937264e5d1acbf58ec82,1000000000000000000000000"
    --account="0xf92d5c260b92b3c0d4cce9baf49eab1a01b463c521adceaba056b2ba2c6d85c5,1000000000000000000000000"
    --account="0xda6eafa0b1129824eefbec14739768001cddd6ddc5ee6ab2249775aae3c5f946,1000000000000000000000000"
    --account="0xa3226249892fff95e697e51b3898064f7b8d5447bcb37ba949d63b2c25e33fc1,1000000000000000000000000"
    --account="0x890765c5f278da49e95606a9ee9ca83263ac6a6944898933d1079802419ecd8e,1000000000000000000000000"
    --account="0xc8ae8ece98de67b1cd78d6ffba67c7f9a1c2528965347ca321214a8140d21c54,1000000000000000000000000"
    --account="0xb79276fcbc2c7f4f5cf08d9c5e9b89320e51db9ba81297856643f763ef95c77b,1000000000000000000000000"
    --account="0x4a6f631837cbdb2767eb0d8a7a4d85e019f5814d46dc5ca4ce7e000571e41756,1000000000000000000000000"
    --account="0x3e87aa8bc0387c2c484d0749ad4e981259630ae42d7a29e3672ab3528172a813,1000000000000000000000000"
    --account="0xe2b1604427537eac268ad1d2494af13ab0bb6312da0f1264d5b33f8f4648e130,1000000000000000000000000"
    --account="0xe4a4fe7ba58386b641c70bd0a7b530b2e80310beb838414566d29d00f9d28679,1000000000000000000000000"
    --account="0x2d20cf51a9e4d4de992314de9f64ec2fa8f12ac415b2b7bf16f3c2f812419b93,1000000000000000000000000"
    --account="0xfe5bbb578bafc13f182781792bc1a4139c7f462f812d7649db15fcd1ee1ab4ff,1000000000000000000000000"
    --account="0x593fed652b94c4a6435bb30dbd76ffd75015f12410480f082c9a1eb5c02a3c6b,1000000000000000000000000"
    --account="0x177d9dad678cec917a94f5ebb2a504fcd6d5cda9d94c0530b4c81d5f9673ecca,1000000000000000000000000"
    --account="0xef5e0c1c24b8f1095343327315b896e1d692f6fdf90aaf91618e8d5c8dc42e6e,1000000000000000000000000"
    --account="0x599b4d9c677fb55ff9aa46f5ef74deca9817494d6584aa7f904f65803693f33b,1000000000000000000000000"
    --account="0xf51408411061b6a6c826e8218690a44de45c631b33fdc1305c6b0e4f22b13cec,1000000000000000000000000"
    --account="0xb9a4ae785cc18fb5c12704e75a889bc7064a6c168fbb6bf26572d7d161e04f26,1000000000000000000000000"
    --account="0x8ef2f7e3e540ea31ce202b39dc5d95ab20d0bde583a76f8181cfaec979ab0efc,1000000000000000000000000"
    --account="0x240d85ca9ca730a96056003466fd1064e89481b74d26e21f7f603ccf0290e72a,1000000000000000000000000"
    --account="0x6190cb0aab53541bc8f5c24249eadf049658a7e9ff2818a7baec91662a18d8e0,1000000000000000000000000"
    --account="0xcf7e769ce34baba85f2811583ea59282a820a39a3d00d9e01be041ec636aa6c8,1000000000000000000000000"
    --account="0xc768b0479c929c0c2496ea233909206bf9cedbde5cdf70e01151ae0cf07c025f,1000000000000000000000000"
    --account="0x089a0ce13579aefc5b6805ddcd84c39d06f2160bef5b96f57a66035b0481da13,1000000000000000000000000"
    --account="0x0d7c747a999de772cb765ecf0e7bf61892aad1c636fff49be565b92ce320a233,1000000000000000000000000"
    --account="0xea735a910af9bba620668a9266859c7802f6d872f4656f111ee7b55b9f8c4a8a,1000000000000000000000000"
    --account="0xe1d385221798bedad0cfff25caa8ec40003c2579cd4d0a7a45ba23f8147558c2,1000000000000000000000000"
    --account="0xe4e22f2709fd6cb669038469e4ea0f9e87c7dd4d9888ca580f752c21d99a4a44,1000000000000000000000000"
    --account="0x2b8e2fa7c251d69379d610f35defb780b9a0f56b38a8b4090db98b4f57fe2a08,1000000000000000000000000"
    --account="0x9b638a6602df46a65294412135430265a5a19bb09a9028af80999508ee4c6b3f,1000000000000000000000000"
    --account="0x5f99ee0647bd4328fb712a4ff17123c530d39925de1728e31250a66f6dbc2eb1,1000000000000000000000000"
    --account="0x6ecd8db762a2a5bc5d28e60f5bb47c8cdb2dbf471c0d9818880305c8bfcab305,1000000000000000000000000"
    --account="0x549f9395816197ecf89ca663144c7182b9c460f86f863e07a57171c9fca76b6d,1000000000000000000000000"
    --account="0xf67f06ded27139c16a7870d131fce0597a79816efff21104e0e30f71603f7d42,1000000000000000000000000"
    --account="0x816d23ab6a1a3e4377e3f74bd518637acd437ef9692b6b638bd971d21f431a7e,1000000000000000000000000"
    --account="0xd2e31a9e5d6adaf7a0d8bffb8a8eb59520d55fc927475871dbfed9d18653f5e5,1000000000000000000000000"
    --account="0xa910a8a343f09ea62bfd6b196c5deb7c4f4e2c475362240c0a6b18edcd63a16d,1000000000000000000000000"
    --account="0x46818434347c9d1925842622c901f7af8b1f8615fa0212103d110c270dabd767,1000000000000000000000000"
    --account="0x3bb760533927ad124a26903da929f0e7750a831a273489bb715d7c037ab17635,1000000000000000000000000"
    --account="0x796abc40a12ac245a45544167e83b28ea861f2034b8ad610e84aad348848a495,1000000000000000000000000"
    --account="0x5c2fa80a97b0a3399e38e067cc0c791ed808b5fc1ac84c068a04a8abfd188fa3,1000000000000000000000000"
    --account="0x7c9908c4acb053c3676253a0cdb46da1ddf7d5fcc246a22e764f24d964c33dec,1000000000000000000000000"
    --account="0xef03ce0e581e1c1ca20065305cfd0f1a8fb8a2fb8ead8c970e6962cef36f2f09,1000000000000000000000000"
    --account="0xe01fddd972098468ca8a4124de365321b908d3047d0d989a72aeead97aac729b,1000000000000000000000000"
    --account="0xff42e50699671dd948939652703c5bc634203d0999dd98a04ad6d56a6a59d013,1000000000000000000000000"
    --account="0x852a2d4c2041fb5d85717f7bb7c1dd5e40f243e7113d6270460f19f5ee39c46d,1000000000000000000000000"
    --account="0x5b9220fadc442b30001d3a089acd2d0c68f8c0ef202892b223e95fe1c034546e,1000000000000000000000000"
    --account="0xa16c24a8d6f1ca02b3cce5028c6c6da9e265eea88961624114153abd4fe49716,1000000000000000000000000"
    --account="0x98a9e6fda00f672fbe04b092483313c48b75e4f5235fd0b59a727bc16b66ba72,1000000000000000000000000"
    --account="0x281fdc87ef28b13aef5d3100d32531af4942f18c3ab8a25d7e5d22a8970bc271,1000000000000000000000000"
    --account="0x92561c4ea513269cc514b62ae2e48365396c5ebf2f7cd69d62d699da6fda4a15,1000000000000000000000000"
    --account="0x7f23148557d9837007828608f993b677deaa0befc77bc81a2422b4f1cb5c26ae,1000000000000000000000000"
    --account="0x81e118e015f76721a82b84ff07d6f02d8fcb9e55f99faae5e74e68eeafa261a2,1000000000000000000000000"
    --account="0x961b9e5a3ce4453b0daf60eacb1ab40c003de2a34abd06b04e29de925f2b6f01,1000000000000000000000000"
    --account="0x377361bab81eb366fb7266c4ee1ba0cf33499670841b58f196e07265c9b23575,1000000000000000000000000"
    --account="0x8efc8e3c0e7c3346f96d7fbb0326eb1cc200bf73ff785303291892561fa99e5d,1000000000000000000000000"
    --account="0x236f00624d702e4c8edc8d672201b52dc5667fda7bc0531d1a04169dfd2f284f,1000000000000000000000000"
    --account="0x500cc16d73f22421802d8d591f4595d8e19713e88d3ae84f4fa3adbf0bd59a42,1000000000000000000000000"
    --account="0x7bf2549d5031bb43635b10c5e6fcf5cd35ff3462e148367f8b5497259da245e3,1000000000000000000000000"
    --account="0xe0582c4cec5304f4eb770704cf20ba278ee5e7e8481a9934bba9f5d1187f614c,1000000000000000000000000"
    --account="0x3c814d4484fa51ba8207f0ae30d6e3152cc9f9b4fc7cb64e8662fb072423e942,1000000000000000000000000"
    --account="0x21a2835e52360517838519c6741df1ccdde70a7d0bba1ca14702eb0553827baf,1000000000000000000000000"
    --account="0x2711d4d54f427e3a2f8fbeae19211a6d49df61e6eab8fc214cd35db1e72edf6b,1000000000000000000000000"
    --account="0xfca54876a7ed4df1b1d29f71619b72e7834183444c98b3baa66434618f531ddf,1000000000000000000000000"
    --account="0xadcb7beac9dcccb9f121037b872bfeb04ed9881e7d3173fd8a58fd4740aafbaa,1000000000000000000000000"
    --account="0xd4079ecbbae71cdafe48175d26ba927e11f8c83b9928bb56ad9ae52575eefd52,1000000000000000000000000"
    --account="0xa9bf3a75dd2e5ab79dc2493853ef5c4778db9f1d0662f96ebd40d13ad0520865,1000000000000000000000000"
    --account="0x1b1318a2ea4af38e5e28460a34cc747e96f963b7889fe2e71bec3163abde5cb2,1000000000000000000000000"
    --account="0x6006347e47b5853e830e510fdb7a6f1479d4f5e8916c8871aece3e1ccd0b5c37,1000000000000000000000000"
    --account="0xc18e82d0e1c3452b4027ab1bac4f27badf7670421b08a3bdb17ee4869f03c6ab,1000000000000000000000000"
    --account="0xa9d06a9fe2561e090b7c2ecb49bde5d7af7741725b2a905ffa63ac6aeb28fc65,1000000000000000000000000"
    --account="0x96450f5adea676eb3e58ee5148858439fccb27da5cd6760ba31ffa7ef05bd1fe,1000000000000000000000000"
    --account="0x86e6cc6b1cb8be0bb82c783d409a4fd9f23b88ab8da5ea05d616693f4d7bb561,1000000000000000000000000"
    --account="0x7ccb0ff30cd2b0fa81b4205734512ec98a9d02c2d3a61705c940899bbf6f25de,1000000000000000000000000"
    --account="0x3cddb66939e7b23cd1a83e38ca22e8ac0780a0d66f89ee2176c53bef5b5f186d,1000000000000000000000000"
    --account="0xf22c395ffb024024578fb9fc5b02e307fba26902b77bd665fc015ecd8455bcb6,1000000000000000000000000"
    --account="0xf3aad9381c3e1d1697b994ed693f4b563880d1c668071f48213f84d784a05b08,1000000000000000000000000"
    --account="0xdfabbcd15955d1f7f87cbac99d23568f9422c59d92ca8264ce577fe357af2daa,1000000000000000000000000"
    --account="0x99b79c062b89328c9a594d855c3c969e5bce8450ce705fa419948800405fb8b7,1000000000000000000000000"
    --account="0x93f3ddbb78fe5efdea870cea1b2c47021a97f7457ee699aae78359a4c47f7124,1000000000000000000000000"
    --account="0x22ee688ba34b6278ad5d40304d2b9c90451ea8bc72e342eaf157602a72f9e543,1000000000000000000000000"
    --account="0x844d02203bf9049d0e1dc0e72d029af4e918cf8d3e30b96dc568746245bdc5a3,1000000000000000000000000"
    --account="0xe45258ea8069206b6f4c148706e249363c27337b851996b8c75b78eb4a76e09d,1000000000000000000000000"
    --account="0x46d6242641cf6496a30b432f72962fe541930b39cf74258ef54683e70d51e168,1000000000000000000000000"
    --account="0xe2571a3c16d1041baea31d248722d4195850218f16ef1422ba5570b1a29fd080,1000000000000000000000000"
    --account="0xf1783d0aa0d681b0478dedd009e293e7090fe510b73e6d705371c35f5f1028d6,1000000000000000000000000"
    --account="0x6a05f2f232a40b4bafe136e509cc4f3d126feff5f1e69d9c256c8d0ae12667b9,1000000000000000000000000"
    --account="0xe593ad4f78af774a3cc171d06bb27ad5339bfa3818ea52acd0181f5d75151f1d,1000000000000000000000000"
    --account="0x642502811a48c23814ea32c9714d728358476e53f5db9e9d78d863717c53901d,1000000000000000000000000"
    --account="0xe29cc0453a7c0b14fcf8c348224fea4d030af27e63c3a2e363f46ee1ab44c2d0,1000000000000000000000000"
    --account="0x7986bf608eb05fe8b61517abebb376b42d845256550de2d52e37e2a8235b22ba,1000000000000000000000000"
    --account="0xe0c423a075dad94c12cf5e2f6b1f0f07a372c01e26c56cb08fec20740c1a9853,1000000000000000000000000"
    --account="0x64daeea3484c3aea25669454eea50b73e2fc02b264a353e618d5f8dc110c5140,1000000000000000000000000"
    --account="0x62013ff3d48f880d77cc1e10026f97372f555646cff25b4f4be07652f484f4b3,1000000000000000000000000"
    --account="0x075ed39d08b2d93cdad025f4c1bcab1fbac6265cbea8cfa1f4022943682eb514,1000000000000000000000000"
    --account="0xbc63cf126f3ed57d6299aab39a33d97e89f1dfd9eaa735f56adfc890e1485e9a,1000000000000000000000000"
    --account="0xb24d30d712ffef647b10e0b62558c1c335f96c6abdb32d1b99652ebe7f395c6e,1000000000000000000000000"
    --account="0x5bba6b4e4fa58aa76a92a658f0440daddae402a455fb4d159d39a618c0b49b59,1000000000000000000000000"
    --account="0xb137d0d38829dc5a58ea303c98e7621d602aa24b68d48ace4c521468f1638c88,1000000000000000000000000"
    --account="0xa8d883116e3d3fb5303249e54f4e2967d0f3396cb7774bd2f60e33b9b709e1e3,1000000000000000000000000"
    --account="0xacfab966b442e2a26028081c12a4ab1263202bbab8e7dc4ffd153d3eefabfd74,1000000000000000000000000"
    --account="0x51ec4220b00cc130489490e69996faf58580982ee1900ec920033aeee4d4e738,1000000000000000000000000"
    --account="0x3fcbcde71254b5a6dfbd7ce03d3cd86b429baa0f5c03c11bd0d78a56c54356d3,1000000000000000000000000"
    --account="0x73e52145285452f14384dd4f2629bd26f750ce41fbb67e06cc6536dfc7275ffa,1000000000000000000000000"
    --account="0x7ea0b07a88d19b63a2a1221d18e2095baa7b8714a8b3df76500e9f0216c67c0d,1000000000000000000000000"
    --account="0x4819038fa2fb89c36d0073ac619a23013fab8ecd410f9d4ef0cf8f042ab8106c,1000000000000000000000000"
    --account="0x762dd676e1199bc50d65fa35d88e62fa9a88ebdc0a86386af9dfbbc2448c882f,1000000000000000000000000"
    --account="0x3b5bc2684a54f7234f57a1c78197ecd78b6098fa643ac2d0c4ff57d857891067,1000000000000000000000000"
    --account="0x5b1ef5e8ccf7c0908fc6210a8886e6fd4c44681c637ec80ce60418b40137bd65,1000000000000000000000000"
    --account="0x03c7b0ecedf67851e4964256167430fc1429705823bf6141415699a6fd01a6b6,1000000000000000000000000"
    --account="0xd256af339f6e36c36c100bb80e68556a754301199e6e403144c257f3cc5ab38b,1000000000000000000000000"
    --account="0xe1a00aaf929e95bfbfb14df5c85ceca3d981fa34307f206e47aaadfa2ed2c414,1000000000000000000000000"
    --account="0x495facb599fae97a2b0093b43073a58ed5270b4f8df75cd3f4ce76c4774d8c76,1000000000000000000000000"
    --account="0x6e69b84c3057ab012be593a7a570567eb3249f7467959a67ddd33954e65fad17,1000000000000000000000000"
    --account="0x438e0cbcc8eaddc4cc6093606ee7dadc2e3ff9c52c03b1fdcad5239358ae93d0,1000000000000000000000000"
    --account="0xcd1ececf634416cb3a6b9523a8446d70342ed92c1dcab3de2e61619169ef6458,1000000000000000000000000"
    --account="0x3e75fd2550fc7381d986dfb0e6fcd537dcabbec6beda25c9411f949e45d4a328,1000000000000000000000000"
    --account="0xc675d1555caed477ad847905c25dca78d06d8984fd86dacb0d04fc445b3a684a,1000000000000000000000000"
    --account="0x3ba63e06c956e413e65492b42e38c9184eacce8e42671316c08412cf3acc772c,1000000000000000000000000"
    --account="0xde7c2685588425dde64cd94593d692c6ea51d1584bab24839ea1b3b26b014c4b,1000000000000000000000000"
    --account="0x2d7e6ee16f783100cd772d7ea1804238bc246c30be2db23fb21b607aaea65743,1000000000000000000000000"
    --account="0x2a3c202dbf9dda923c6e8ce969522a89c28265c20ea80768a5fa2228000e3205,1000000000000000000000000"
    --account="0xe0a76f5ee4348ca1ceeac0ede9e8631722c8f6ed8174714e613c39fcc6d1cdad,1000000000000000000000000"
    --account="0xa18b9cf35df157b1c3c1e3760432cb1f65890ef4f025fb61d8e01935a87875b7,1000000000000000000000000"
    --account="0x704a9e1d9a87a728864f9da87e31edab369e2e69fb18421ab8569fa780c25019,1000000000000000000000000"
    --account="0x7e8b558f98106df820202781b6ff9b60801f82f70d09f3254db65bce434a20af,1000000000000000000000000"
    --account="0x5db713194ab38c338840486ed94dbca7de389f0ebaa0a0e1bc867ccc57c44885,1000000000000000000000000"
    --account="0x96d1cc0581fbf7494cd065731a339449c429040659d1feca8ba7a1d98e1ed11d,1000000000000000000000000"
    --account="0x9b3f292a2be1d1aaae80b7f82bba6fa57edde18f5ed4e12276f85d70030a343a,1000000000000000000000000"
    --account="0xee570b36710271c2cefc02d0dbddeea9bec1b1e27ef9196134e8e7448d0edb1d,1000000000000000000000000"
    --account="0x2c99260948e9b6939003524823834646c5ec72257a09029a7b34518ccf08d40a,1000000000000000000000000"
    --account="0x65ed6b082225391609a500b7a6574d82d133c9318d4403ae120a05614df40b84,1000000000000000000000000"
    --account="0x52a4194080fec83c918cbbb0f61ae5a6518b4c6bb179e84e9b6c333f347049b6,1000000000000000000000000"
    --account="0xbc0e4f4baaee319cbf1fee2862faf429baa1e1c324d3b9f5d664cbf157eb8a79,1000000000000000000000000"
    --account="0x7e57a8895ea020db9af30995cddcb4318a824c16ddcc36d90a4a9d957932514f,1000000000000000000000000"
    --account="0x2426d3ddfc0d40fc839853ff6cdf25f4f952a429103a79c86f1aab2e024437c5,1000000000000000000000000"
    --account="0x2494ba92ce2b5779cfad716f21f3dd3ae795c0a6fe01402b88ed6e26a42ec7fa,1000000000000000000000000"
    --account="0x90fce962bf471722476699f7725c1d419f50e9918f43096421a65868747530f0,1000000000000000000000000"
    --account="0x4a58965cf43ce8052bb9e0e401c3ada9c4e6d3d766b3c70e5ee7c87ff7a1291e,1000000000000000000000000"
    --account="0x3e6a1703f76f6a74e87e96ca30bd8bdd9961af68edc1f79e58429945da15f432,1000000000000000000000000"
    --account="0x60ffc819b8f2b46096de8ece0e947e033ae23f8890e9795798076d8061b04d2b,1000000000000000000000000"
    --account="0x8c3ff10ff061deae7cc895b8cc2de5030084c6767aac12248c5171641bb77ea7,1000000000000000000000000"
    --account="0x773d7880054dd6d114a38d89c5d65c3f843c9f77a314079bb9a817d2e6557665,1000000000000000000000000"
    --account="0x87258192c34c4ecb1cbd7db7dd365c6d0895af93294ea69b16f0ff6eb0bd6a15,1000000000000000000000000"
    --account="0x08c4d542c2d3e192471badb878a05efec7ef140812093376bb3b241d40b291dc,1000000000000000000000000"
    --account="0x53bd6ab328cf10e7b1c167700dc73a9aa86e5f2bb7d5ed3317720633fc1f5ffa,1000000000000000000000000"
    --account="0x27fe41b113dfd9f1fef166c7229dad93c5190b31895ac8ddd5928c06514ed333,1000000000000000000000000"
    --account="0x30ee4b1159ff68673cbe4926ee4e8102fc97d534db4870742e23e55787b5183c,1000000000000000000000000"
    --account="0x40f99b3a8bebc7343e2d3de5ccaa9555d8da8d82b0d69e33829d41a5c2ecd179,1000000000000000000000000"
    --account="0x216412a741e8d1b17d8abcfc900199b82a32a8673b0ff2908b444d2c1ef13986,1000000000000000000000000"
    --account="0x12a0e49d8bf47cebbc5f7756aa1a89aa6a61ccb4e0ebcd3dddaf715f6f22e24c,1000000000000000000000000"
    --account="0x0e3fba48d96fcf85a887eed83b543a4d1feb375ddc82d82cfaf3735b499b624f,1000000000000000000000000"
    --account="0xb15f3dc58b3d4347f26814db632185b71e35a0916e3d26fa15641b84bbb323c2,1000000000000000000000000"
    --account="0xab8a67c3745aea172fecbe1d9d35421290fa0a7cd2449645c6963899af6c6db5,1000000000000000000000000"
    --account="0x0df040f67e053216a45c427ac68f8f3940308b04928c618b278915e5be96312c,1000000000000000000000000"
    --account="0x293ed1c0bd9c639e08eb0fad906eadf868d2b0cb2ed3475d880fe5d03a291679,1000000000000000000000000"
    --account="0xb2c0eba776d97b13610a4e580a10648f53bb82683415064e47a86caa5bd30df2,1000000000000000000000000"
    --account="0x574bd1eb14e25ce625dd3b5aaf134f188e132a25535a83de35062d30294c259b,1000000000000000000000000"
    --account="0x74e9ee2200aeba8ef8ffe741e5560c72d4d55b3c46d209e3b540c8c06d5d60b7,1000000000000000000000000"
    --account="0xc82c632f520eb0b1e3f712460baea3b4651965c09ba63b8d854072461b881b10,1000000000000000000000000"
    --account="0x8aea0002931a99b7cbf16be58079d93e6080b42a536b9764e39e30d5cd953565,1000000000000000000000000"
    --account="0x6adfe9a0f9ec0538b7226b6463b0ae81604c50059a3b6c0447a0acb572c54763,1000000000000000000000000"
    --account="0x86bb9f452ce22ec509a1ad47a68e2697498957c6bfc528495ab77d1c00770a2e,1000000000000000000000000"
    --account="0xb21a21567cb063df4904617b5b2524f2669592109540170b5cb929b47d86bc29,1000000000000000000000000"
    --account="0x9a5d71b924c826b551c9679ed1667e6d0bef6e0326fd91216a1c224759845c34,1000000000000000000000000"
    --account="0x14ca797f8f9180fe1f4c2a659a5f5682125d175326aaf6d6df8aa7432abc2cb5,1000000000000000000000000"
    --account="0xe9c5dae122224f981a72e2dbb72ed08abd345c2e5767dc4fe4d4611a1d28ea69,1000000000000000000000000"
    --account="0x4c9ea061f84110445acdcaed8447b0ca2ba2d6a6342ad9a9e40d016640a9f1a1,1000000000000000000000000"
    --account="0x6fd09ca77f1f63653aec49b932aa49af25572c9a96afe1235f80f20efa7b074e,1000000000000000000000000"
    --account="0x51ce8ea66d1ba7f238c402ab52255ee3df37ea0e6c44aa3b33c1630fa47b051a,1000000000000000000000000"
    --account="0x5e8470370554b36781f262e2e565890997b2fff88d980f3d21226604c76591d9,1000000000000000000000000"
    --account="0x5c16feb0cdacd5d7434d9ba61ea3f8aad64c49a85c5ab94e7fe6c0f387700d9c,1000000000000000000000000"
    --account="0xda57f761f9a1418bf69fc3d33aa103e2b80cd5adce104d94606a61de4cd1970c,1000000000000000000000000"
    --account="0x00b09690e1de1ad19892f45902a10e9c0e96a1417c051584d1845578e33c60fa,1000000000000000000000000"
    --account="0x23bb9463018553e0e99ca7987838287f48e650899b2c21a20fd37db656ef4019,1000000000000000000000000"
    --account="0xb7b7af820cfdde4becadbaf20344d56f3686a8836b0703ef175e654a58a17fb4,1000000000000000000000000"
    --account="0xdff4c10733f813c9cb3c9e54c3bab8a8c52b528bd10cdf39e33b04693cd00f26,1000000000000000000000000"
    --account="0xc13b36c6e11e2d8be87e77d2500697735ae82581fc8743c3801e3e70e9079a7a,1000000000000000000000000"
    --account="0xc88ad07b523110d9d2692cea7e90833218089b0559be4ad63c7f7e295dce7166,1000000000000000000000000"
    --account="0x289fd1c28579ea7f4cca8459157aa4f86d90c307217f8f7ad4eb916bb56064d0,1000000000000000000000000"
    --account="0x11599854da426e088764f69f01790b45d9764c66752ac7a7aa79a9790ab5fe39,1000000000000000000000000"
  )

  if [ "$SOLIDITY_COVERAGE" = true ]; then
    node_modules/.bin/testrpc-sc --gasLimit 0xfffffffffff --port "$testrpc_port" "${accounts[@]}" --network-id 1337 > /dev/null &
  else
    node_modules/.bin/testrpc --gasLimit 0xfffffffffff "${accounts[@]}" --network-id 1337 > /dev/null &
  fi

  testrpc_pid=$!
}

if testrpc_running; then
  echo "Using existing testrpc instance"
else
  echo "Starting our own testrpc instance"
  start_testrpc
fi

if [ "$SOLIDITY_COVERAGE" = true ]; then
  node_modules/.bin/solidity-coverage

  if [ "$CONTINUOUS_INTEGRATION" = true ]; then
    cat coverage/lcov.info | node_modules/.bin/coveralls
  fi
else
  node_modules/.bin/truffle test "$@"
fi
